# phplua

把php函数迁移到lua的类

## Why？

1. php里有很多实用的函数，在lua里很多需要自己实现

    举个栗子来说，在quick（cocos lua的一个框架）中，quick实现了一个字符串相关的类string（位于functions.lua里）

    里面实现了很多特别常用的方法，从这个类可以看出，lua其实原生的函数确实强大（千变万化），同样也体现了lua函数的不足

    **“不够多样化”**

    这一点在php的库，或者说php的原生函数里就不存在，因为php有很多函数已经实现了特别丰富的功能

    参照php提供的函数的功能，实现成lua版本，这样的一个库应该也是很赞的，起码我用php的函数用的很爽

2. 因为是刚开始接触lua，所以这些函数的迁移其实也是对我的一个考验-。-

## What？

里面有什么？

1. 里面包含了php的一些比较常用的函数，主要是数组以及字符串函数

    在这个库里，php模块下有例如array模块，在require进php模块之后，你需要这样调用函数

    ```lua
    php.array:func ...
    ```

    当然具体的函数说明在文档里

2. 用Ldoc生成文档的一个示例，是的！Ldoc在网上有很多使用介绍，然而，我折腾了一个晚上才搞清楚怎么用：看官方英文文档以及读Ldoc的源代码以及自己测试，才搞明白那些遇到的问题（这对于我才接触lua只有1个月的人来说，简直是残忍！）

    你可以参考里面的注释格式，写出自己的lua带文档的代码，具体使用还是要看官方文档（如果你英文比较好的话），这里简单说一下

    i. Ldoc依赖[Penlight](https://github.com/stevedonovan/Penlight)，不要相信网上的各种安装教程，我试了很多，你们听我的没错的，<del>下载</del>克隆Penlight，看到`lua/pl`了没？然后把pl文件夹单独放在你的lua项目的根目录

    ii. [Ldoc](https://github.com/stevedonovan/ldoc)也是必不可少，也放在根目录（ldoc.lua和pl文件夹在同一层！），tests里有一个config.ld，拷出来，也放在根目录

    iii. 修改config.ld里的file参数，改成你的项目目录（相对路径，比如我这里是'php/'，因为我的库的lua代码都在php这个目录下）

    iv. 然后把lua配置成环境变量，在windows下，cmd里敲`lua`命令有lua的提示说明成功了，然后在当前项目里输入

    ```
    lua ldoc.lua .
    ```

    v. 没有错误的话，大功告成！你项目的根目录又多了一些html文件，那些就是文档，如果有错误，而且步骤和我上面的完全一致没有任何问题的话，那就是你注释的格式错误了，好好看一下我写的注释格式吧

4. 由于php和lua在一些细节的地方可能实现的不一样，这些我都会在代码里说明，比如对于空值的判断，php把0的布尔值认为是false，但是在lua里，0的布尔值是true的！这一点从if语句可以快速得出结论，因此，在var模块（var.lua）里，对empty函数的实现，也算是对lua的特殊处理

5. 如果你是一个phper，然后想学lua，我觉得这是一个很好的入门教程

## How？

怎么使用？

在lua里只要

```lua
local php = require('php')
```

就可以使用所有的函数，如在lua（或者所有语言里应该都是）里最常用的一个函数：

打印一个table

```lua
php.var:var_dump(table)
```


